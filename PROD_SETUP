#!/bin/bash
# Simple script to export variables from .env file with command substitution
# Shows colored output: variable names in red, values in green

# Color codes
RED='\033[0;31m'
GREEN='\033[0;32m'
NC='\033[0m' # No Color

while IFS= read -r line || [[ -n "$line" ]]; do
  # Skip comments and empty lines
  if [[ $line != \#* ]] && [[ -n $line ]]; then
    # Handle export keyword if present
    [[ $line == export* ]] && line="${line#export }"
    
    # Get variable name
    var_name="${line%%=*}"
    
    # Evaluate and export the line (handles command substitution)
    eval "export $line"
    
    # Get and print the actual value after evaluation with colors
    eval "echo -e \"Exported: ${RED}$var_name${NC}=${GREEN}\$$var_name${NC}\""
  fi
done < .env

# Add any additional variables here

export NODE_ENV=production
echo -e "${NC}OVERIDE: ${RED}NODE_ENV${NC}=${GREEN}${NODE_ENV}${NC}"

export PATH=${ROOT_DIR}/sites/vhs/utils:$PATH
echo -e "${NC}OVERIDE: ${RED}PATH${NC}=${GREEN}${PATH}${NC}"




